# 8.8.8.8 ping 안 될 때 — Windows ICS 점검

Linux(TOPST)는 **192.168.137.1**(Windows)까지 통신 가능합니다.  
**8.8.8.8**로 안 되는 이유는 **Windows가 192.168.137.x → 인터넷**으로 패킷을 넘겨주지 않기 때문입니다.

---

## 1. Windows에서 할 일 (순서대로)

### ① 네트워크 연결 열기
- **Win + R** → `ncpa.cpl` 입력 → Enter

### ② 어댑터 구분
- **인터넷 되는 쪽**: Wi‑Fi 또는 유선(인터넷 되는 포트)
- **TOPST 연결 쪽**: TOPST와 케이블로 연결한 **이더넷** 하나

### ③ 인터넷 공유(ICS) 설정
1. **인터넷 되는 연결**(예: Wi‑Fi) **우클릭** → **속성**
2. **공유** 탭
3. 아래 둘 다 확인:
   - ☑ **"다른 네트워크 사용자가 이 컴퓨터의 인터넷 연결을 통해 연결할 수 있도록 허용"**
   - **홈 네트워크 연결** → **TOPST와 연결된 이더넷** 선택
4. **확인** 클릭

### ④ Windows 이더넷 IP 확인
- **명령 프롬프트(CMD)** 에서:
  ```bat
  ipconfig
  ```
- **TOPST와 연결된 이더넷** 항목이 다음이어야 합니다:
  - **IPv4 주소**: **192.168.137.1**
  - **서브넷 마스크**: 255.255.255.0  
- 192.168.137.1이 아니면 ICS가 그 어댑터에 적용된 게 아닙니다. ③을 다시 확인하고, **공유할 대상**을 TOPST 연결 이더넷으로 선택했는지 봅니다.

### ⑤ 방화벽에서 공유 허용
1. **제어판** → **Windows Defender 방화벽** → **고급 설정**
2. **인바운드 규칙**에서 **"공유된 인터넷 연결에 대한 라우팅 및 원격 액세스"** 같은 규칙이 **사용**인지 확인
3. 또는 **제어판** → **Windows Defender 방화벽** → **Windows Defender 방화벽 설정 사용/해제** 에서 **개인 네트워크**만 잠시 끄고, Linux에서 다시 `ping 8.8.8.8` 테스트 (테스트 후 다시 방화벽 켜기)

### ⑥ ICS 서비스 동작 확인
- **Win + R** → `services.msc` → Enter
- **"Internet Connection Sharing (ICS)"** 서비스 찾기
- **시작 유형**: 자동, **상태**: 실행 중 인지 확인
- 중지돼 있으면 **시작** 후 다시 Linux에서 `ping 8.8.8.8`

---

## 2. 그래도 안 될 때

### A. 공유 해제 후 다시 공유
1. ③에서 **체크 해제** → 확인
2. 다시 **체크** → **홈 네트워크 연결**에 TOPST 이더넷 선택 → 확인
3. Linux에서 `ping 8.8.8.8` 재시도

### B. 수동 IP 후 공유
1. TOPST와 연결된 이더넷 **우클릭** → **속성** → **인터넷 프로토콜 버전 4(TCP/IPv4)** → **속성**
2. **다음 IP 주소 사용**:  
   - IP: **192.168.137.1**  
   - 서브넷: **255.255.255.0**  
   - 게이트웨이: 비움
3. **고급** → **WINS** 탭 → **NetBIOS 사용 안 함** (선택)
4. 확인 후, ③처럼 **인터넷 되는 연결**에서 이 이더넷으로 **공유** 다시 설정

### C. 다른 PC/휴대폰 테더링
- Windows ICS가 계속 안 되면, **휴대폰 USB 테더링** 또는 **다른 공유기**로 Linux에 인터넷을 주고, 8.8.8.8 ping이 되는지 확인해 보면 원인 구분에 도움이 됩니다.

---

## 3. Linux에서 테스트

Windows에서 위 설정 후:

```bash
ping -c 3 192.168.137.1   # 반드시 성공
ping -c 3 8.8.8.8         # 여기서 성공해야 인터넷 공유된 것
```

둘 다 성공하면 `apt update` / `apt install` 사용 가능합니다.
